!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.slowJsonStringify={})}(this,function(r){var e=function(r,e){return e.reduce(function(r,e){return r&&r[e]},r)},n=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,u=r;t<u.length;t+=1)n+=e(u[t])+",";return"["+n.substr(0,n.length-1)+"]"};r.sjs=function(r){var t=function(r){var n,t,u,i;return{str:JSON.stringify(r,function(r,e){var n=Array.isArray(e);return"object"!=typeof e||n?(function(r){var e=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+r)}(e),n?e:"function"==typeof e?e:e+"__sjs"):e}),queue:(n=r,t=["string","number","boolean","array"],u=[],i=new Set(t),function r(t,s){void 0===s&&(s=[]);var o=Array.isArray(t);if(!i.has(e(n,s))&&!o)return Object.keys(t).map(function(e){return r(t[e],s.concat([e]))});u.push({isArray:o,method:o&&t[0],path:[s].flat(),type:t})}(n),u)}}(r),u=t.queue,i=function(r,e){var n=[],t=r.replace(e,function(r){switch(r){case'"string__sjs"':case'"undefined__sjs"':return'"__par__"';case'"number__sjs"':case'"boolean__sjs"':case'["array-simple__sjs"]':case"[null]":return"__par__";default:var e=r.match(/(?<=\").+?(?=\")/)[0];return n.push(e),r}}).split("__par__");return{queue:n,chunks:t}}(t.str,new RegExp('"(string__sjs|number__sjs|boolean__sjs|undefined__sjs)"|\\[(.*?)\\]',"gm")).chunks,s=i[i.length-1],o=function(r){return function(e,n){if(void 0!==e)return e;var t=r[n];return 34===t.charCodeAt(t.length-1)?e:'"'+e+'"'}}(i),a=u.length;return function(r){for(var t="",f=0;f!==a;){var c=u[f],_=c.method,p=c.isArray,d=e(r,c.path),y=p?n(d,_):d;t+=i[f]+o(y,f),f+=1}return t+s}},r.escape=function(r){var e=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}}});
//# sourceMappingURL=sjs.umd.js.map
