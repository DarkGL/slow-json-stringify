!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.slowJsonStringify={})}(this,function(r){var e=function(r,n){for(var t in r){if(t===n)return[t];if(r[t]&&"object"==typeof r[t]){var i=e(r[t],n);if(i)return i.unshift(t),i}}},n=function(r,e){return e.reduce(function(r,e){return r&&r[e]},r)},t=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,i=r;t<i.length;t+=1)n+=e(i[t])+",";return"["+n.substr(0,n.length-1)+"]"},i=function(r){var e=new Set(["number","string","boolean","undefined","array-simple","function"]);JSON.stringify(r,function(r,n){var t=Array.isArray(n);if("object"!=typeof n||t){if(t){if(e.has(n[0])||e.has(typeof n[0]))return;throw new Error('Expected either "array-simple" or a function. received '+n)}if("function"!=typeof n&&!e.has(n))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+n)}return n})};r.sjs=function(r){i(r);var u=function(r){var t,u,o,a,f={},s=new Map,c="",p=JSON.stringify(r,function(n,t){var u=Array.isArray(t);return("object"!=typeof t||u)&&(u&&s.set(n,t[0]),i(t),f[n]=e(r,n),c+='"'+n+'"|'),t});return{map:f,arrais:s,props:c,str:p,queue:(t=r,u=["string","number","boolean","array"],o=[],a=new Set(u),function r(e,i){void 0===i&&(i=[]);var u=Array.isArray(e);if(!a.has(n(t,i))&&!u)return Object.keys(e).map(function(n){return r(e[n],i.concat([n]))});o.push({isArray:u,method:u&&e[0],path:[i].flat(),type:e})}(t),o)}}(r),o=u.queue,a=function(r,e){var n=[],t=r.replace(e,function(r){switch(r){case'"string"':case'"undefined"':return'"__par__"';case'"number"':case'"boolean"':case'["array-simple"]':case"[null]":return"__par__";default:var e=r.match(/(?<=\").+?(?=\")/)[0];return n.push(e),r}}).split("__par__");return{queue:n,chunks:t}}(u.str,new RegExp(u.props+'"(string|number|boolean|undef)"|\\[(.*?)\\]',"gm")).chunks,f=a[a.length-1],s=function(r){return function(e,n){if(void 0!==e)return e;var t=r[n];return 34===t.charCodeAt(t.length-1)?e:'"'+e+'"'}}(a),c=o.length;return function(r){for(var e="",i=0;i!==c;){var u=o[i],p=u.method,y=u.isArray,d=n(r,u.path),h=y?t(d,p):d;e+=a[i]+s(h,i),i+=1}return e+f}},r.escape=function(r){var e=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}}});
//# sourceMappingURL=sjs.umd.js.map
