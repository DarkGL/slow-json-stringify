!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.slowJsonStringify={})}(this,function(exports){var _find=function(path){for(var length=path.length,str="obj",i=0;i<length;i++)str=str.replace(/^/,"("),str+=" || {})."+path[i];return eval("((obj) => "+str+")")},_makeArr=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,s=r;t<s.length;t+=1)n+=e(s[t])+",";return"["+n.slice(0,n.length-1)+"]"},_validator=function(r){var e=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+r)},escape=function(r){var e=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}},_prepareString=function(r){return JSON.stringify(r,function(r,e){var n=Array.isArray(e);return"object"!=typeof e||n?(_validator(e),n?e:"function"==typeof e?e:e+"__sjs"):e})},_makeQueue=function(r,e){var n=[],t=new Set(["number__sjs","string__sjs","boolean__sjs","undefined__sjs"]);return function s(i,a){void 0===a&&(a=[]);var o=Array.isArray(i);if(!t.has(_find(a)(r))&&!o)return Object.keys(i).map(function(r){return s(i[r],a.concat([r]))});n.push({isArray:o,method:!!o&&("string"==typeof i[0]?"array-simple":_find(a)(e)[0]),find:_find(Array.isArray(a)?a:[a])})}(r),n},_makeChunks=function(r,e){return r.replace(e,function(r){switch(r){case'"string__sjs"':case'"undefined__sjs"':return'"__par__"';case'"number__sjs"':case'"boolean__sjs"':case'["array-simple__sjs"]':case"[null]":return"__par__";default:return r}}).split("__par__")},wrapper=function(r){return function(e,n){if(void 0!==e)return e;var t=r[n];return 34===t.charCodeAt(t.length-1)?e:'"'+e+'"'}},sjs=function(r){var e=_prepareString(r),n=new RegExp('"(string__sjs|number__sjs|boolean__sjs|undefined__sjs)"|\\[(.*?)\\]',"gm"),t=_makeChunks(e,n),s=t[t.length-1],i=wrapper(t),a=JSON.parse(e),o=_makeQueue(a,r),u=o.length;return function(r){for(var e="",n=0;n!==u;){var a=o[n],f=a.method,_=a.isArray,c=(0,a.find)(r),p=_?_makeArr(c,f):c;e+=t[n]+i(p,n),n+=1}return e+s}};exports.sjs=sjs,exports.escape=escape});
//# sourceMappingURL=sjs.umd.js.map
