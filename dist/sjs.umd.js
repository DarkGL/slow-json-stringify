!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.slowJsonStringify={})}(this,function(exports){var _find=function(path){for(var length=path.length,str="obj",i=0;i<length;i++)str=str.replace(/^/,"("),str+=" || {})."+path[i];return eval("((obj) => "+str+")")},_makeArr=function(e,r){if("array-simple"===r)return JSON.stringify(e);for(var n="",t=e.length,s=0;s<t-1;s++)n+=r(e[s])+",";return"["+(n+=r(e[t-1]))+"]"},_validator=function(e){var r=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(e)){if(r.has(e[0])||r.has(typeof e[0]))return;throw new Error('Expected either "array-simple" or a function. received '+e)}if("function"!=typeof e&&!r.has(e))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+e)},defaultRegex=new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm"),escape=function(e){return void 0===e&&(e=defaultRegex),function(r){return r.replace(e,function(e){return"\\"+e})}},_prepareString=function(e){return JSON.stringify(e,function(e,r){var n=Array.isArray(r);return"object"!=typeof r||n?(_validator(r),n?r:"function"==typeof r?r:r+"__sjs"):r})},_makeQueue=function(e,r){var n=[],t=new Set(["number__sjs","string__sjs","boolean__sjs","undefined__sjs"]);return function s(i,a){void 0===a&&(a=[]);var o=Array.isArray(i);if(!t.has(_find(a)(e))&&!o)return Object.keys(i).map(function(e){return s(i[e],a.concat([e]))});var u=Array.from(a),f=_find(u);n.push({isArray:o,method:o&&("string"==typeof i[0]?"array-simple":f(r)[0]),find:f})}(e),n},_makeChunks=function(e,r){return e.replace(r,function(e){switch(e){case'"string__sjs"':case'"undefined__sjs"':return'"__par__"';case'"number__sjs"':case'"boolean__sjs"':case'["array-simple__sjs"]':case"[null]":return"__par__";default:return e}}).split("__par__")},wrapper=function(e){return function(r,n){if(void 0!==r)return r;var t=e[n];return 34===t.charCodeAt(t.length-1)?r:'"'+r+'"'}},sjs=function(e){var r=_prepareString(e),n=new RegExp('"(string__sjs|number__sjs|boolean__sjs|undefined__sjs)"|\\[(.*?)\\]',"gm"),t=_makeChunks(r,n),s=t[t.length-1],i=wrapper(t),a=JSON.parse(r),o=_makeQueue(a,e),u=o.length;return function(e){for(var r="",n=0;n!==u;){var a=o[n],f=a.method,_=a.isArray,c=(0,a.find)(e),p=_?_makeArr(c,f):c;r+=t[n]+i(p,n),n+=1}return r+s}};exports.sjs=sjs,exports.escape=escape});
//# sourceMappingURL=sjs.umd.js.map
