var _find=function(path){for(var length=path.length,str="obj",i=0;i<length;i++)str=str.replace(/^/,"("),str+=" || {})."+path[i];return eval("((obj) => "+str+")")},_makeArr=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=r.length,a=0;a<t-1;a++)n+=e(r[a])+",";return"["+(n+=e(r[t-1]))+"]"},_validator=function(r){var e=new Set(["number","string","boolean","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean". received '+r)},TYPES=["number","string","boolean","array","null"],attr=function(r,e){if(!TYPES.includes(r))throw new Error('Expected one of: "number", "string", "boolean", "null". received '+r+" instead");return"array"===r&&e instanceof Function?[e]:r},defaultRegex=new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm"),escape=function(r){return void 0===r&&(r=defaultRegex),function(e){return e.replace(r,function(r){return"\\"+r})}},_prepareString=function(r){return JSON.stringify(r,function(r,e){var n=Array.isArray(e);return"object"!=typeof e||n?(_validator(e),n?e:(console.log(e),"function"==typeof e?e:e+"__sjs")):e})},_makeQueue=function(r,e){var n=[],t=new Set(["number__sjs","string__sjs","boolean__sjs"]);return function r(a,o){void 0===o&&(o=[]);var i=Array.isArray(a);if(!t.has(a)&&!i)return Object.keys(a).map(function(e){return r(a[e],o.concat([e]))});var s=Array.from(o),u=_find(s);n.push({isArray:i,method:i&&u(e)[0],find:u,name:s[s.length-1]})}(r),n},_makeChunks=function(r,e){return r.replace(/"(string__sjs|number__sjs|boolean__sjs)"|\[(.*?)\]/gm,function(r){return'"string__sjs"'===r?'"__par__"':"__par__"}).split("__par__").map(function(r,n,t){var a='("'+(e[n]||{}).name+'":("?))$',o="(,?)"+a,i=/^("}|})/.test(t[n+1]||""),s=new RegExp(i?o:a),u=/^(\"\,|\,|\")/;return{flag:!1,pure:r,prevUndef:r.replace(u,""),isUndef:r.replace(s,""),bothUndef:r.replace(u,"").replace(s,"")}})},select=function(r){return function(e,n){var t=r[n];return void 0!==e?t.flag?t.prevUndef+e:t.pure+e:(r[n+1].flag=!0,t.flag?t.bothUndef:t.isUndef)}},sjs=function(r){var e=_prepareString(r),n=JSON.parse(e),t=_makeQueue(n,r),a=t.length,o=_makeChunks(e,t),i=select(o);return function(r){for(var e="",n=0;n!==a;){var s=t[n],u=s.method,f=s.isArray,c=(0,s.find)(r),p=f?_makeArr(c,u):c;e+=i(p,n),n+=1}var l=o[o.length-1];return e+(l.flag?l.prevUndef:l.pure)}};exports.sjs=sjs,exports.attr=attr,exports.escape=escape;
//# sourceMappingURL=sjs.js.map
