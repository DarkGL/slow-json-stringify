var r=function(r,e){return e.reduce(function(r,e){return r&&r[e]},r)},e=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,u=r;t<u.length;t+=1)n+=e(u[t])+",";return"["+n.substr(0,n.length-1)+"]"};exports.sjs=function(n){var t=function(e){var n,t,u,s;return{str:JSON.stringify(e,function(r,e){var n=Array.isArray(e);return"object"!=typeof e||n?(function(r){var e=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+r)}(e),n?e:"function"==typeof e?e:e+"__sjs"):e}),queue:(n=e,t=["string","number","boolean","array"],u=[],s=new Set(t),function e(t,a){void 0===a&&(a=[]);var i=Array.isArray(t);if(!s.has(r(n,a))&&!i)return Object.keys(t).map(function(r){return e(t[r],a.concat([r]))});u.push({isArray:i,method:i&&t[0],path:[a].flat(),type:t})}(n),u)}}(n),u=t.queue,s=function(r,e){var n=[],t=r.replace(e,function(r){switch(r){case'"string__sjs"':case'"undefined__sjs"':return'"__par__"';case'"number__sjs"':case'"boolean__sjs"':case'["array-simple__sjs"]':case"[null]":return"__par__";default:var e=r.match(/(?<=\").+?(?=\")/)[0];return n.push(e),r}}).split("__par__");return{queue:n,chunks:t}}(t.str,new RegExp('"(string__sjs|number__sjs|boolean__sjs|undefined__sjs)"|\\[(.*?)\\]',"gm")).chunks,a=s[s.length-1],i=function(r){return function(e,n){if(void 0!==e)return e;var t=r[n];return 34===t.charCodeAt(t.length-1)?e:'"'+e+'"'}}(s),o=u.length;return function(n){for(var t="",c=0;c!==o;){var f=u[c],_=f.method,p=f.isArray,h=r(n,f.path),l=p?e(h,_):h;t+=s[c]+i(l,c),c+=1}return t+a}},exports.escape=function(r){var e=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}};
//# sourceMappingURL=sjs.js.map
