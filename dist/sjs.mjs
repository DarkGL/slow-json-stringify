var r=function(r,n){return n.reduce(function(r,n){return r&&r[n]},r)},n=function(r,n){if("array-simple"===n)return JSON.stringify(r);for(var e="",t=0,u=r;t<u.length;t+=1)e+=n(u[t])+",";return"["+e.substr(0,e.length-1)+"]"},e=function(r){var n=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(n,function(r){return"\\"+r})}},t=function(e){var t=function(n){var e,t,u,a;return{str:JSON.stringify(n,function(r,n){var e=Array.isArray(n);return"object"!=typeof n||e?(function(r){var n=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(r)){if(n.has(r[0])||n.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!n.has(r))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+r)}(n),e?n:"function"==typeof n?n:n+"__sjs"):n}),queue:(e=n,t=["string","number","boolean","array"],u=[],a=new Set(t),function n(t,s){void 0===s&&(s=[]);var i=Array.isArray(t);if(!a.has(r(e,s))&&!i)return Object.keys(t).map(function(r){return n(t[r],s.concat([r]))});u.push({isArray:i,method:i&&t[0],path:[s].flat(),type:t})}(e),u)}}(e),u=t.queue,a=function(r,n){var e=[],t=r.replace(n,function(r){switch(r){case'"string__sjs"':case'"undefined__sjs"':return'"__par__"';case'"number__sjs"':case'"boolean__sjs"':case'["array-simple__sjs"]':case"[null]":return"__par__";default:var n=r.match(/(?<=\").+?(?=\")/)[0];return e.push(n),r}}).split("__par__");return{queue:e,chunks:t}}(t.str,new RegExp('"(string__sjs|number__sjs|boolean__sjs|undefined__sjs)"|\\[(.*?)\\]',"gm")).chunks,s=a[a.length-1],i=function(r){return function(n,e){if(void 0!==n)return n;var t=r[e];return 34===t.charCodeAt(t.length-1)?n:'"'+n+'"'}}(a),o=u.length;return function(e){for(var t="",c=0;c!==o;){var f=u[c],_=f.method,p=f.isArray,h=r(e,f.path),l=p?n(h,_):h;t+=a[c]+i(l,c),c+=1}return t+s}};export{t as sjs,e as escape};
//# sourceMappingURL=sjs.mjs.map
